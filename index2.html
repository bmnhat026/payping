<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nh·∫Øc nh·ªü thanh to√°n th·∫ª t√≠n d·ª•ng</title>
    <style>
        /* CSS gi·ªØ nguy√™n t·ª´ file g·ªëc */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background-color: #f5f5f5; padding: 20px; line-height: 1.6; }
        .container { max-width: 1200px; margin: 0 auto; }
        .header { background: white; padding: 30px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); margin-bottom: 20px; display: flex; justify-content: space-between; align-items: center; }
        .header h1 { color: #2563eb; font-size: 28px; margin-bottom: 5px; }
        .header p { color: #666; }
        .btn { background: #2563eb; color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer; font-size: 16px; transition: background 0.3s; }
        .btn:hover { background: #1d4ed8; }
        .btn-sm { padding: 6px 12px; font-size: 14px; margin: 2px; }
        .btn-green { background: #16a34a; } .btn-green:hover { background: #15803d; }
        .btn-orange { background: #ea580c; } .btn-orange:hover { background: #c2410c; }
        .btn-red { background: #dc2626; } .btn-red:hover { background: #b91c1c; }
        .btn-gray { background: #6b7280; } .btn-gray:hover { background: #4b5563; }
        .form-section { background: white; padding: 30px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); margin-bottom: 20px; }
        .form-section.edit { border-left: 4px solid #ea580c; }
        .form-group { margin-bottom: 20px; }
        .form-group label { display: block; margin-bottom: 8px; font-weight: 600; color: #374151; }
        .form-group input, .form-group select { width: 100%; padding: 12px; border: 2px solid #d1d5db; border-radius: 8px; font-size: 16px; transition: border-color 0.3s; }
        .form-group input:focus, .form-group select:focus { outline: none; border-color: #2563eb; }
        .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        .card-type-selector { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 10px; }
        .card-type-option { padding: 20px; border: 2px solid #d1d5db; border-radius: 8px; cursor: pointer; transition: all 0.3s; text-align: center; }
        .card-type-option.active { border-color: #2563eb; background-color: #eff6ff; }
        .card-type-option h3 { margin-bottom: 5px; color: #374151; }
        .card-type-option p { color: #6b7280; font-size: 14px; }
        .card-item { background: white; padding: 25px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); margin-bottom: 15px; border-left: 4px solid #d1d5db; }
        .card-item.paid { border-left-color: #16a34a; background-color: #f0fdf4; }
        .card-item.due-soon { border-left-color: #eab308; background-color: #fefce8; }
        .card-item.overdue { border-left-color: #dc2626; background-color: #fef2f2; }
        .card-header { display: flex; justify-content: space-between; align-items: start; margin-bottom: 15px; }
        .card-info h3 { color: #374151; font-size: 20px; margin-bottom: 5px; }
        .card-meta { color: #6b7280; font-size: 14px; }
        .card-status { text-align: right; }
        .status-badge { padding: 4px 12px; border-radius: 20px; font-size: 12px; font-weight: 600; margin-bottom: 5px; display: inline-block; }
        .status-paid { background: #dcfce7; color: #166534; }
        .status-due-soon { background: #fef3c7; color: #92400e; }
        .status-overdue { background: #fecaca; color: #991b1b; }
        .status-upcoming { background: #dbeafe; color: #1e40af; }
        .card-actions { display: flex; flex-wrap: wrap; gap: 8px; align-items: center; }
        .stats { background: white; padding: 30px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); margin-top: 20px; }
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-top: 20px; }
        .stat-item { text-align: center; padding: 20px; border-radius: 8px; background: #f9fafb; }
        .stat-number { font-size: 32px; font-weight: bold; margin-bottom: 5px; }
        .stat-label { color: #6b7280; font-size: 14px; }
        .hidden { display: none; }
        .empty-state { text-align: center; padding: 60px 20px; background: white; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .empty-state h3 { color: #374151; margin-bottom: 10px; }
        .empty-state p { color: #6b7280; margin-bottom: 20px; }
        @media (max-width: 768px) { .header { flex-direction: column; text-align: center; gap: 20px; } .form-row { grid-template-columns: 1fr; } .card-type-selector { grid-template-columns: 1fr; } .card-header { flex-direction: column; gap: 15px; } .card-actions { justify-content: center; } }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div>
                <h1>üí≥ Nh·∫Øc nh·ªü thanh to√°n th·∫ª t√≠n d·ª•ng</h1>
                <p>Kh√¥ng bao gi·ªù b·ªè l·ª° thanh to√°n</p>
            </div>
            <button class="btn" onclick="showAddForm()">‚ûï Th√™m th·∫ª</button>
        </div>
        <div id="addForm" class="form-section hidden">
            <!-- Gi·ªØ nguy√™n form th√™m th·∫ª t·ª´ file g·ªëc -->
        </div>
        <div id="editForm" class="form-section edit hidden">
            <!-- Gi·ªØ nguy√™n form s·ª≠a th·∫ª t·ª´ file g·ªëc -->
        </div>
        <div id="cardsList"></div>
        <div id="stats" class="stats hidden">
            <!-- Gi·ªØ nguy√™n ph·∫ßn th·ªëng k√™ t·ª´ file g·ªëc -->
        </div>
    </div>

    <!-- Firebase + Script -->
    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-app.js";
      import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-analytics.js";
      import { getDatabase, ref, set, get } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-database.js";

      const firebaseConfig = {
        apiKey: "AIzaSyDLPqEYL2v38kOyzH42THhs4NuOKR8e3sw",
        authDomain: "payping-edfa8.firebaseapp.com",
        databaseURL: "https://payping-edfa8-default-rtdb.asia-southeast1.firebasedatabase.app",
        projectId: "payping-edfa8",
        storageBucket: "payping-edfa8.firebasestorage.app",
        messagingSenderId: "860071397124",
        appId: "1:860071397124:web:ae343fcdded6209167b251",
        measurementId: "G-2MSKBH9JDF"
      };

      const app = initializeApp(firebaseConfig);
      const analytics = getAnalytics(app);
      const db = getDatabase(app);

      let cards = [];
      let editingCardId = null;

      async function loadCards() {
        const snapshot = await get(ref(db, "cards/"));
        if (snapshot.exists()) {
          cards = snapshot.val();
        } else {
          cards = [];
        }
        renderCards();
        updateStats();
      }

      function saveCards() {
        set(ref(db, "cards/"), cards);
      }

      // üëâ copy t·∫•t c·∫£ function t·ª´ file g·ªëc (addCard, edit, delete, markAsPaid, renderCards, updateStats...)
      // thay ch·ªó g·ªçi localStorage b·∫±ng saveCards() / loadCards()

      window.onload = function() { loadCards(); };
    </script>
</body>
</html>
